"use strict";function BlackMage(){this.hp=12,this.mp=6,this.str=2,this.magic=20,this.def=6,this.attack=baseAttack,this.spAttack=specialAttack,this.avatar="b-Mage"}function WhiteMage(){this.hp=14,this.mp=7,this.str=2,this.magic=18,this.def=6,this.attack=baseAttack,this.spAttack=specialAttack,this.avatar="w-Mage"}function Knight(){this.hp=22,this.mp=2,this.str=12,this.magic=2,this.def=14,this.attack=baseAttack,this.spAttack=specialAttack,this.avatar="knight"}function Archer(){this.hp=16,this.mp=4,this.str=7,this.magic=10,this.def=8,this.attack=baseAttack,this.spAttack=specialAttack,this.avatar="archer"}function WeakEnemy(){this.hp=9+Math.round(20*Math.random()),this.mp=4+Math.round(20*Math.random()),this.str=9+Math.round(20*Math.random()),this.magic=9+Math.round(20*Math.random()),this.def=9+Math.round(20*Math.random()),this.attack=enemyBaseAttack,this.spAttack=enemySpecialAttack}function MidEnemy(){this.hp=15+Math.round(20*Math.random()),this.mp=7+Math.round(20*Math.random()),this.str=15+Math.round(20*Math.random()),this.magic=15+Math.round(20*Math.random()),this.def=15+Math.round(20*Math.random()),this.attack=enemyBaseAttack,this.spAttack=enemySpecialAttack}function ToughEnemy(){this.hp=20+Math.round(20*Math.random()),this.mp=12+Math.round(20*Math.random()),this.str=20+Math.round(20*Math.random()),this.magic=20+Math.round(20*Math.random()),this.def=20+Math.round(20*Math.random()),this.attack=enemyBaseAttack,this.spAttack=enemySpecialAttack}var player,monster,playerStatsTemplate=_.template($(".character-stats").text()),showStats=function(a){return playerStatsTemplate(a)},baseAttack=function(a){var b=Math.floor(5*Math.random())+this.str/2;a.hp=a.hp-b,$(".battle-log-text").append("You attacked the enemy for "+b+" points of damage. <br> The enemy has "+a.hp+" hit points left.<br>")},specialAttack=function(a){a.hp=a.hp-(Math.floor(5*Math.random())+this.magic/2),this.mp=this.mp-1,console.log("The enemy has "+a.hp+" hit points left."),console.log("You have "+this.mp+" mana left.")},enemyBaseAttack=function(){player.hp=player.hp-(Math.floor(5*Math.random())+this.str/2-player.def/4),console.log("You have "+player.hp+" hit points left.")},enemySpecialAttack=function(){player.hp=player.hp-(Math.floor(5*Math.random())+this.magic/2-player.def/4),console.log("You have "+player.hp+" hit points left.")};$(".player-class-bMage").on("mouseenter",function(){var a=new BlackMage;setTimeout(function(){$(".bMage-stats").stop(!0,!0).append(showStats(a))},200)}),$(".player-class-bMage").on("mouseleave",function(){$(".bMage-stats").stop(!0,!0).html("")}),$(".player-class-wMage").on("mouseenter",function(){var a=new WhiteMage;setTimeout(function(){$(".wMage-stats").stop(!0,!0).append(showStats(a))},200)}),$(".player-class-wMage").on("mouseleave",function(){$(".wMage-stats").stop(!0,!0).html("")}),$(".player-class-knight").on("mouseenter",function(){var a=new Knight;setTimeout(function(){$(".knight-stats").stop(!0,!0).append(showStats(a))},200)}),$(".player-class-knight").on("mouseleave",function(){$(".knight-stats").stop(!0,!0).html("")}),$(".player-class-archer").on("mouseenter",function(){var a=new Archer;setTimeout(function(){$(".archer-stats").stop(!0,!0).append(showStats(a))},200)}),$(".player-class-archer").on("mouseleave",function(){$(".archer-stats").stop(!0,!0).html("")});var playerMenuAdvance=function(){$(".player-selector").remove(),setTimeout(function(){$(".monster-select").css("opacity","1")},200)};$(".player-class-bMage").click(function(){player=new BlackMage,playerMenuAdvance()}),$(".player-class-wMage").click(function(){player=new WhiteMage,playerMenuAdvance()}),$(".player-class-knight").click(function(){player=new Knight,playerMenuAdvance()}),$(".player-class-archer").click(function(){player=new Archer,playerMenuAdvance()});var battleStage=function(){var a=Math.random();$(".battlefield-image").attr("class","battlefield-image"),$(".battlefield-image").toggleClass(.25>a?"field":a>=.25&&.5>a?"tech":a>=.5&&.75>a?"castle":"forest")},enemyProcess=function(a){$(".monster-select").css("opacity","0"),setTimeout(function(){$(".monster-select").hide(),$(".battlefield").show().css("opacity","1"),battleStage(),$(".opponent").attr("class","opponent")},400),setTimeout(function(){$(".opponent").addClass(a.toLowerCase()+"-opponent"),$(".hero").addClass(player.avatar)},600),setTimeout(function(){$(".hero-name").prepend(player.constructor.name),$(".enemy-name").text(" "),$(".enemy-name").prepend(a),$(".hero-stats").text(" "),$(".hero-stats").append(showStats(player)),$(".enemy-stats").text(" "),$(".enemy-stats").append(showStats(monster)),$(".battle-log").animate({opacity:"1"},2400)},100),setTimeout(function(){$(".attack-menu").show()},3e3)};$(".fiend").click(function(){monster=new WeakEnemy,enemyProcess("Fiend")}),$(".goblin").click(function(){monster=new WeakEnemy,enemyProcess("Goblin")}),$(".dragon").click(function(){monster=new MidEnemy,enemyProcess("Dragon")}),$(".behemoth").click(function(){monster=new ToughEnemy,enemyProcess("Behemoth")});var isItDead=function(){monster.hp<=0&&($(".battle-log-text").html(" "),$(".battle-log-text").append("You have defeated the enemy!"),setTimeout(function(){$(".battlefield").hide(),$(".monster-select").show().css("opacity","1"),$(".battle-log-text").html(" "),monster={}},1500))};$(".attack").click(function(){$(".battle-log-text").animate({opacity:"0"},100),$(".hero").css({left:"+=140px",transition:"all .2s ease-in"}),setTimeout(function(){$(".hero").css({left:"-=140px"}),$(".battle-log-text").html(" "),player.attack(monster),$(".battle-log-text").animate({opacity:"1"},100),$(".enemy-stats").html(" "),$(".enemy-stats").append(showStats(monster)),isItDead()},200)});